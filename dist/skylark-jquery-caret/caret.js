/**
 * skylark-jquery-caret - A version of jquery caret that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jquery-caret/
 * @license MIT
 */
define(["skylark-jquery"],function(t){var e=document.createElement("input"),n="setSelectionRange"in e||"selectionStart"in e,r="createTextRange"in e||"selection"in document,a=/\r\n/g,o=/\r/g,i=function(e){return void 0!==e.value?e.value:t(e).text()},c=function(t,e){var n=i(t).replace(o,"").length;return void 0===e&&(e=n),(e=Math.floor(e))<0&&(e=n+e),e<0&&(e=0),e>n&&(e=n),e},l=function(t,e,n,r){this.start=t||0,this.end=e||0,this.length=n||0,this.text=r||""};l.prototype.toString=function(){return JSON.stringify(this,null,"    ")};var s=function(t){if(t)return n?function(t){return t.selectionStart}(t):r?function(t){var e,n,r,o,c;return t.focus(),t.focus(),(e=document.selection.createRange())&&e.parentElement()===t?(o=(r=i(t)).length,(n=t.createTextRange()).moveToBookmark(e.getBookmark()),(c=t.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",c)>-1?r.replace(a,"\n").length:-n.moveStart("character",-o)):0}(t):void 0},u=function(t,e){t.focus(),e=c(t,e),n?function(t,e){t.setSelectionRange(e,e)}(t,e):r&&function(t,e){var n=t.createTextRange();n.move("character",e),n.select()}(t,e)},g=function(e,n){var r=s(e),a=i(e).replace(o,""),c=+(r+n.length+(a.length-r)),l=+e.getAttribute("maxlength");if(function(t,e){return t.hasAttribute?t.hasAttribute(e):void 0!==t[e]}(e,"maxlength")&&c>l){var g=n.length-(c-l);n=n.substr(0,g)}!function(e,n){void 0!==e.value?e.value=n:t(e).text(n)}(e,a.substr(0,r)+n+a.substr(r)),u(e,r+n.length)},f=function(t){if(t)return n?function(t){var e=new l;e.start=t.selectionStart,e.end=t.selectionEnd;var n=Math.min(e.start,e.end),r=Math.max(e.start,e.end);return e.length=r-n,e.text=i(t).substring(n,r),e}(t):r?function(t){var e=new l;t.focus();var n=document.selection.createRange();if(n&&n.parentElement()===t){var r,a,o,c,s=0,u=0,g=i(t);r=g.length,a=g.replace(/\r\n/g,"\n"),(o=t.createTextRange()).moveToBookmark(n.getBookmark()),(c=t.createTextRange()).collapse(!1),o.compareEndPoints("StartToEnd",c)>-1?s=u=r:(s=-o.moveStart("character",-r),s+=a.slice(0,s).split("\n").length-1,o.compareEndPoints("EndToEnd",c)>-1?u=r:(u=-o.moveEnd("character",-r),u+=a.slice(0,u).split("\n").length-1)),s-=g.substring(0,s).split("\r\n").length-1,u-=g.substring(0,u).split("\r\n").length-1,e.start=s,e.end=u,e.length=e.end-e.start,e.text=a.substr(e.start,e.length)}return e}(t):void 0},h=function(t,e,a){e=c(t,e),a=c(t,a),n?function(t,e,n){t.setSelectionRange(e,n)}(t,e,a):r&&function(t,e,n){var r=t.createTextRange();r.moveEnd("textedit",-1),r.moveStart("character",e),r.moveEnd("character",n-e),r.select()}(t,e,a)},v=function(e){var a=t(e);a.is("input, textarea")||e.select?a.select():n?function(t){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}(e):r&&function(t){var e=document.body.createTextRange();e.moveToElementText(t),e.select()}(e)};return t.extend(t.fn,{caret:function(){var t=this.filter("input, textarea");if(0===arguments.length){var e=t.get(0);return s(e)}if("number"==typeof arguments[0]){var n=arguments[0];t.each(function(t,e){u(e,n)})}else{var r=arguments[0];t.each(function(t,e){g(e,r)})}return this},range:function(){var e=this.filter("input, textarea");if(0===arguments.length){var n=e.get(0);return f(n)}if("number"==typeof arguments[0]){var r=arguments[0],a=arguments[1];e.each(function(t,e){h(e,r,a)})}else{var o=arguments[0];e.each(function(e,n){!function(e,n){var r=t(e),a=r.val(),o=f(e),i=+(o.start+n.length+(a.length-o.end)),c=+r.attr("maxlength");if(r.is("[maxlength]")&&i>c){var l=n.length-(i-c);n=n.substr(0,l)}var s=a.substr(0,o.start),u=a.substr(o.end);r.val(s+n+u);var g=o.start,v=g+n.length;h(e,o.length?g:v,v)}(n,o)})}return this},selectAll:function(){return this.each(function(t,e){v(e)})}}),t.extend(t,{deselectAll:function(){return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this}}),t});
//# sourceMappingURL=sourcemaps/caret.js.map
